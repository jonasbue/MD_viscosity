\begin{tikzpicture}
    \begin{groupplot}[
        group style = {
            group size=2 by 3,
            horizontal sep=0.5cm,
            vertical sep=0.9cm,
            xticklabels at=edge bottom,
            xlabels at=edge bottom,
            ylabels at=edge left,
        },
        width=0.4\textwidth,
        xlabel=Packing fraction,
        scale only axis,
        xmin=0,
        xmax=0.46,
    ]
    \pgfplotsinvokeforeach{1.000e+00, 1.500e+00, 2.000e+00}{
        \nextgroupplot [
            yticklabel pos=left,
            ylabel=$\eta$,
            title style={
                at={(0.5,0.9)},
                anchor=north,
            },
            title={$m_2 = \num[round-mode=places, round-precision=1]{#1} m_1$}
            legend to name={legend},
            legend style={at={(1.01, 1.02)}, anchor=south, legend columns=5, column sep=0.2cm},
        ] \addplot+ [
                only marks,
                mark options = {black},
                discard if not={m2}{#1},
            ] plot[
                error bars/.cd, y dir=both, y explicit
            ] table[
                x = pf,
                y = thorne,
                col sep = comma,
                y error plus = error,
                y error minus = error,
            ]{data/visc_varying_mass_large.csv};
            \addlegendentry{Measured value};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dashed,
            ] table[
                x = pf,
                y = thorne_SPT,
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addlegendentry{$\eta_{\text{SPT}}$};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                solid,
            ] table[
                x = pf,
                y = thorne_PY,
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addlegendentry{$\eta_{\text{PY}}$};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dashdotted,
            ] table[
                x = pf,
                y = thorne_BMCSL,
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addlegendentry{$\eta_{\text{MBCSL}}$};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dotted,
                line width=1pt,
            ] table[
                x = pf,
                y = enskog_1,
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addlegendentry{$\eta_{\text{Enskog,1}}$};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dotted,
                line width=1pt,
            ] table[
                x = pf,
                y = enskog_2,
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addlegendentry{$\eta_{\text{Enskog,2}}$};
        \nextgroupplot [
            ylabel = {$\eta/\eta_{\,Thorne}$},
            yticklabel pos=right,
            title style={
                at={(0.5,0.9)},
                anchor=north,
            },
            title={$m_2 = \num[round-mode=places, round-precision=1]{#1} m_1$}
        ] 
        \addplot+ [
                only marks,
                mark options = {black},
                discard if not={m2}{#1},
            ] plot[
                error bars/.cd, y dir=both, y explicit
            ] table[
                x = pf,
                y = thorne_PY_mix,
                col sep = comma,
                y error plus = error_thorne_PY_mix,
                y error minus = error_thorne_PY_mix,
            ]{data/visc_norm_varying_mass_large.csv};
            \addplot [
                domain=0:0.5,
                color=black,
                solid,
            ]{1};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dashed,
            ] table[
                x = pf,
                y expr = \thisrow{thorne_SPT}/\thisrow{thorne_PY},
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dashdotted,
            ] table[
                x = pf,
                y expr = \thisrow{thorne_BMCSL}/\thisrow{thorne_PY},
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dotted,
                line width=1pt,
            ] table[
                x = pf,
                y expr = \thisrow{enskog_1}/\thisrow{thorne_PY},
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
            \addplot+ [
                color=black,
                mark=none,
                discard if not={m2}{#1},
                dotted,
                line width=1pt,
            ] table[
                x = pf,
                y expr = \thisrow{enskog_2}/\thisrow{thorne_PY},
                col sep = comma,
            ]{data/theory_varying_mass_large.csv};
    }
    \end{groupplot}
\end{tikzpicture}
